# 王培

> 从2016-04-24到2016-04-29

## 本周跟进

- 资讯垂类mib页第三方接入相关跟进
- 资讯垂类图集详情页需求确定
- 资讯垂类视频详情页交接

## 资讯垂类

### 1. MIB框架

######  - 数据接口前后端跨域调整

- 背景：目前mib中的数据接口有的没有做跨域处理，有的虽然做了跨域处理但是回调函数各异

- 方案：与后端rd沟通，后端兼容接口上线，前端统一改成跨域处理，并用cb作为回调函数

- 进度：后端兼容接口已经上线

### 2. 图集详情页

#### 背景与目标

    针对图片资源，增强用户浏览的沉浸感和体验，提高媒体时长

#### 完成情况

- 需求已评审，UE图已确认

- 预计节后（5.4）进入开发，（5.6）开发完成，5.9提测

#### 效果图

<table algin="center" >
<tr>
<td style="vertical-align:top" rowspan="2"><img src="../2016-04-29/img/wangpei07/wp01.jpg" height="800px"></td>
<td style="vertical-align:top"><img src="../2016-04-29/img/wangpei07/wp02.jpg" height="400px"></td>
<td style="vertical-align:top"><img src="../2016-04-29/img/wangpei07/wp03.jpg" height="400px"></td>
</tr>
<tr>
<td style="vertical-align:top"><img src="../2016-04-29/img/wangpei07/wp04.jpg" height="400px"></td>
<td style="vertical-align:top"><img src="../2016-04-29/img/wangpei07/wp05.jpg" height="400px"></td>
</tr>
</table>


### 3. 视频详情页交接

#### 背景与目标

    针对图片资源，增强用户浏览的沉浸感和体验，提高媒体时长

#### 完成情况

- QA测试完，bug已修复，待上线

- 预计（4.29）完成上线


#### 效果图

- 暂无

### 4. 接口加sid

#### 背景与目标

    为了能够在上线过程中进行分级验证，机制类似于大搜的分级验证机制，将所有到headline的请求都带上结果页请求中的url的sid参数
    
#### 完成情况

- 状态：前端已上线

#### 效果图

- 暂无

### 5. mib页性能监控（无更新）

- 状态：（开发中...）

    - 监控体系已确定（各个时间已和清乾沟通并明确）
    
    - 后端时间需要和曦洋，清乾沟通后确定获取方案

#### 速度监控

##### 监控体系

也可以称之为『监控指标』，更直接的对页面加载速度进行描述

- 时间点
    
      1. 用户点击调起mib页按钮或文案的时间点T1
                
      2. iframe页面解析到title节点的时间点T2
          
      3. iframe页面文章内容dom加载完成的间点T3（相关推荐之前的内容）
          
      4. iframe页面首屏（window高度内）的所有图片、视频等加载完成的时间点T4
      
      5. 后端时间 mib_ST放在返回的HTTP头部的SetCookie中，JS使用读取Cookie的方式获取时间值mib_ST.
                
- 监控指标定义 

    
   **首屏时间**
    
    含义：用户从触发调起mib页面事件到页面首屏区域全部加再完（包括图片、视频）的时间。

	计算方法： T4 - T1

    日志字段名：mib_fs
 
 
   **核心dom可用时间**
    
    含义：用户从触发调起mib页面事件到mib页面全部文字和框架布局的时间。

    计算方法： T3 - T1

    日志字段名：mib_tti

    
   **后端处理时间**
    
    含义：后端服务的时间开销

    计算方法： mib_ST, bws在接到请求和即将发出返回数据的时候记下时间点，两者相减得到后端处理时间。放入返回HTTP头部的setCookie中。

    日志字段名：mib_srv
    
   **网络时间**
    
    含义：从用户触发调起mib页面事件，到iframe中的页面下载完成开始执行时的网络开销（含少许浏览器开销）。
          
    网络开销包括：1、发送HTTP请求数据（1个RTT）；2、接受返回数据的第一个RTT

    少许浏览器开销包括：1、点击事件处理；2、解压gzip；3、把HTML装入解析器

         
    计算方法： T2 - mib_ST - T1

    日志字段名：mib_net
          
   **核心Dom前端渲染时间**
     
    含义：iframe页面从开始渲染到核心Dom（iframe区域全部文字和框架）渲染完成的耗时。
     
    计算方法：T3 - T2

    日志字段名：mib_fsdom
          
   **其他首屏元素时间**
 
    含义：从核心Dom渲染完成后出现首屏内元素加载完成的耗时。要注意的是首屏元素并不是在核心Dom渲染完成后才开始加载，在首屏元素的加载往往和Dom的渲染是并行的。在没有图片或者图片较少的情况下，核心Dom渲染完成后首屏就已经OK了。所以这个指标主要体现的是在核心Dom加载完成后，依然影响首屏展现的元素加载的额外开销。
		  
    计算方法：T4 - T3

    日志字段名：mib_frext
    
##### 监控机制

    即对页面加载速度等进行监控的代码
    
##### 日志数据 & 平台

    数据以日志的方式发送，speedup平台获取相关数据进行分析，总结
  
    更直接的向使用者展现mib页性能
  
    目前，speedup平台已经可以拿到mib页的日志数据
  
#### 后续计划

- 速度监控

- 速度优化

#### 完成情况

- 监控体系

    - 各个监控指标已确定，在实际测试中会根据测试数据进行调整
    
- 监控机制

    - 开发中
    
- 测试

    - delay



## 运营（无更新）

### 1. 运营类通用事件模板升级（无更新）

#### 背景与目标

```
老模板不能满足新的功能需求，修改及维护成本较大。因此开发新的模板，栅格迁移及功能升级，
```

#### 完成情况

- PV：暂无

- 状态

    - 模板已上线，0流量测试中，需求有变动，待需求确定后需要进一步改进
    
#### 效果图

<table algin="center">
<tr>
<td><img src="../2016-02-05/img/wangpei07/wp01.png" width="350px"></td>
</tr>
</table>

### 3. 节日通用卡升级（无更新）

#### 背景与目标

```
为适应导流中途岛需求，模板需增加更优质、丰富阅读内容，以提高用户停留时长。
```

#### 完成情况

- PV：暂无

- 状态

    - 因UE调整哥伦布sigma设计标准，修改设计图，预计今天出终稿（delay）
    
    - 预计下周一（2016/03/14）进入开发状态

#### 效果图

<table algin="center">
<tr>
<td><img src="../2016-03-11/img/wangpei07/img01.png" width="350px"></td>
</tr>
</table>

## 下周计划

- 新交互改版图集功能
- mib跟进











 




















