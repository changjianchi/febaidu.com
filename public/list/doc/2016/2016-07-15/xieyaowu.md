# 谢耀武

> 从2016-07-11 到 2016-07-15

于07-13正式接手平台、基础模板，目前出行的进度：

* 城市到城市 - 高质量query全量，正向
* 火车票点到点 - 小流量中，正向
* 汽车票点到点 - 模板已上线
* 飞机票点到点 - 模板测试完成，等待pm走单上线，后续@青青跟进

## 平台 - 单模板上线

### 背景

1. 目前模板上线只是同步文件，无需重启服务，适合数据配送的方式
1. 目前863上线上线需要打包上线，这种方式上线事件2小时左右，并且需要单日所有需求打包，期间的确认和等待比较耗时。需要提升上线效率

### 预计收益

1. 模板达到上线状态无需等待，直接操作上线，并且可同步上线15个模板（15个窗口）
1. 预估单次模板上线时间（静态文件9mins + 模板 30mins）：39mins或30mins，较之前的120mins+有较大提升
1. 回滚效率相应类似第二点有提升
1. 由于是模板owner操作，并且上线时间提升，对人力上有很大的优化

### 进度

目前已经跟@浪波沟通整体的流程，预计07-15下午熟悉mis的接入、noah的接口等，07-18找相关接口人预估时间点，07-18给出整体时间点和流程图

### 需求点

1. 静态文件：wise，pc，pad
1. 模板文件：wise，pc，pad
1. 紧急上线的流程：看通道周末和节假日是否需要审批上线
1. 平台上线权限：在高峰期或者节假日不允许单个上线，必须值周通过或者操作才可以上线
1. 平台上线并发数限制
1. 平台上线进度：调用webhook给出当前上线进度，并在首台完成后停止，需要手动点击下一步才可以，并且确认单台等待的时间点（2/3分钟），超时则自动暂停
1. 平台操作回滚：考虑到上线过程中回滚、上线完成后回滚的机制
1. 上线操作：静态文件判断->先上静态文件->静态文件全量后再上模板
1. mis的文件名：因并发需求，可以时间缀命名推送到mis，看mis接口是否支持该方式
1. 上线tar包：因每次上线都是一个时间缀命名的tar包，确认何时删除这些tar包

## 平台需求

* 预览时跳转链接日志、交互日志检查

## 基础模板需求

* @刘悦需求：在c_base中alaTcUrl、fe_fn_c_box_adaptive_prefix 2个方法添加参数：extra，默认为空，可选
