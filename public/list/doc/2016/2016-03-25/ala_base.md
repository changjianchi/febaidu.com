# 【阿拉丁基础建设方向周报】

> 从2016-03-19到2016-03-25

## 上线时间持续跟进优化

### 背景与目标

目前wise上线时间比较久，比PC慢了一倍多。需要持续跟进和优化上线时间，以减少上线人力成本和快速响应紧急需求。

### 进度

1、推进OP去掉上线sleep 60s - op本周处理高优需求，评估delay至下周

## 哥伦布基础架构

### 背景

哥伦布项目，目前已有的机制很难做到支持。需要升级

### 进度

周四已经上线

## sigma 机制

### 背景

1、 目前的 sigma 机制比较卡顿    
2、 必须要求模板有iphone和iphone.only两套模板，不够灵活。线在线上很多query在白卡时是9条结果。    
3、 之前哥伦布的方案没有涉及到 sigma 相关，以现有的机制上来实现哥伦布会比较麻烦。    

### 进度

由于US的性能问题，周三修改了实现逻辑。 - 周五上线
由于AE觉得有问题，周五需要重新定方案。

## tc跳转相关

### 背景

目前模板中tc链接的生成比较混乱，许多项目有依赖，需要统一

### 进度

1、本周发现旧的平台上已经配置了链接是否转码，但是目前没生效。周五推进追查问题。上线方案依赖。
2、跟进tc接到的错误跳转链接（已转给相关同学）

## wise模板开发平台化二期
### 项目背景
wise阿拉丁模板开发未平台化，部署环境、调试代码成本比较高，而且目前参与wise阿拉丁模板开发的产品线有十几个，急需一个平台来管理开发人员及相关模板，以提高后续模板开发及人员管理成本。

### 目标
* 开发统一：所有产品线及所有端模板，开发统一，规范统一，流程统一
* 上线统一：统一所有搜索结果模板权限控制和上线控制
* 管理统一：所有产品线及所有端模板，统一平台管理、监控、验证等

### 整体计划
* 发单之前部署沙盒预览环境  1.20-1.25
* wise添加例行日志信息  1.25-2.1
* 支持哥伦布开发升级    2.2-3.15
    * 模板开发模块支持多根目录升级  2.22-3.1
    * 任务模块升级  3.2-3.3
    * pc&wise smarty编译脚本升级 3.4
    * 新增模板升级  3.7-3.8
        * 增加主模板类型 
    * 预览升级
        * 支持多模板编译    3.8
        * 子卡预览选项增加“选择子卡”和“选择主模板”  3.9-3.11
        * 预览数据在线merge 3.11-3.14
* 静态文件增加数据库管理    3.16-3.30
* 上线流程自动化管理 4月份

### 本周工作

* 圣玛利亚平台一期上线
* 修复预处理未同步的bug
* 修复沙盒环境被提测模块代码覆盖的问题
* 收集圣玛利亚平台二期需求，下周给出排期
* 整理平台使用说明文档，已完成50%
* 静态文件保存增加了日志记录

## xml转mcpack
### 项目背景
xml数据大小比mcpack大，需要和pc端打平

### 问题
* 单个result转mcpack是数组形式，xml是object形式，7个模板需兼容，预计3.15之前上线
* mini属性字段现状是_xxx，转mcpack后变成@xxx，7个模板需兼容，预计3.15之前上线
* num_baidu字段diff存在17个模板需兼容处理，预计3.15之前上线
* kv资源转mcpack的属性字段会跟pc一样，变成二维数组，涉及模板约200多个，需分批迁移

### 进度

* 升级模板singer_v2和tiebaxml，已完成上线

## wise sigma体验优化项目

### 背景与目标

sigma展现明显有白屏，然后再出现模板;低端机器ipod、iphone5等，页面比较复杂是上下滑动卡顿

### 完成情况

* 1、分析页面卡顿原因，通过排查，发现去掉iscroll功能体验会好很多，并且手百上下滑动一次会触发resize30多次

* 2、解决方案未定，初步推手百优化，产品层面看看能否少用iscroll功能。

### 本周进展

* 21号修改完所有2的阿拉丁模板，并上线小流量。25号出小流量初版数据


## 哥伦布sigma机制重构

### 背景与目标

线上sigma机制优化已接近尾声，但整体实现方案还是存在问题，固重构新的实现方案，老的机制保留

### 本周进度

1、本周sigma支持品专，24号修改完成上线



## 整体结果页loading效果

### 背景

sigma会在结果返回后去修改头部搜索框皮肤，会造成头部明显的跳动，正常结果也会出现下面空白情况，为了优化体验，增加重新搜索的loading效果

### 完成情况

3月14号上线小流量实验

实验地址：http://m.baidu.com/s?word=%E4%B9%8C%E9%95%87&sid=104007

实验组：104007 流量3%

对照组：104008 流量3%

### 本周进展

小流量实验结论已产出，基本持平，等待UBS同事的评估邮件

## 阿拉丁协同项目

### 背景

缩减阿拉丁样式，使结果页10条样式保持风格一致

### 进展

* 增加一种带子链的样式，29号上线

* 弱化流程已经敲定，暂时由我这边和pm接口，完成平稳退化，后续放开权限给pm同学

* 平台配置和ODP选模板机制已经上线

* 本周统一跟pm同学培训退化流程

## 阿拉丁模板性能优化

### 背景

缩减阿拉丁展现的不可见图片，提升页面展现速度

### 进展

* 文档地址：http://sfe.baidu.com/#/阿拉丁/无线网页搜索/模板性能优化/图片懒加载方案

* 已推送各个负责的fe操作
