# 【阿拉丁基础建设方向周报】

> 从2016-03-28到2016-04-01

## 上线时间持续跟进优化  @齐健

### 背景与目标

目前wise上线时间比较久，比PC慢了一倍多。需要持续跟进和优化上线时间，以减少上线人力成本和快速响应紧急需求。

### 进度

1、op人力问题，需要FE给上线过程中的机器数据 - 周五给出数据，让OP评估
2、原订三月底去掉高峰期上线封禁，OP有delay。具体时间节后给出

## 哥伦布2.0机制

### 背景

原有机制对2.0样式支持的不够好，一些需求支持不了。需要升级哥伦布机制

### 进度

1、长线方案把千岛湖、哥伦布垂类的机制合并在一起。    
    涉及FE的改动及排期：   
    a、平台升级支持  @小琴    
    b、修改www主模板支持模板渲染    @雪冉    
    c、修改阿拉丁统计，支持组、簇相关日志    @雪冉    
    d、修改阿拉丁基础库。支持组、簇的JS渲染。以及层级间的绑定。    @齐健    
    e、开发2.0样式中的组、簇模板。    @齐健    
    排期：除平台外  4月12日开发完，4月13联调，4月18提测，4月25上线。平台因高优支持上线优化，时间待定。    
2、短线方案暂时沿用之前的哥伦布1.0机制。本周在主模板内升级至2.0样式，跟RD沟通新增对一些2.0的样式做trick升级。 - 周五上线    @齐健

## tc跳转相关 @齐健

### 背景

目前模板中tc链接的生成比较混乱，许多项目有依赖，需要统一

### 进度

1、l和srd参数移至odp。需要odp插件支持，支持后部分写死l和srd参数的模板开始迁移。- odp目前高优支持哥伦布2.0，插件排期暂未给出    
2、线上有问题的链接来源整理 - 整理中，下周给出列表。


## 日志相关  @齐健

### 背景

日志后续需要迁移到webb，短期内需要把现有日志迁移到webb格式，供ubs迁移。   
外部产品线的日志沟通

### 进度

升级日志统计 - 周一已上线    
前端展现日志方案沟通
升级日志的 srcid 为 new_srcid - 周五升级base，后续日志平稳后统一使用 new_srcid

## wise sigma体验优化项目 @李浪波

### 背景与目标

sigma展现明显有白屏，然后再出现模板;低端机器ipod、iphone5等，页面比较复杂是上下滑动卡顿

### 完成情况

* 1、分析页面卡顿原因，通过排查，发现去掉iscroll功能体验会好很多，并且手百上下滑动一次会触发resize30多次

* 2、解决方案未定，初步推手百优化，产品层面看看能否少用iscroll功能。

### 本周进展

* 上周五25号转全流量

* 28号出初步评估数据，产出以后横滑标准文档：http://sfe.baidu.com/#/阿拉丁/无线网页搜索/模板性能优化/图片横滑使用原生scroll组件——pmd%2Fscroll%2Fscroll

* 推广到各个产品先开发使用，并强调值周同学需检查这个功能点

* 03-29号产出评估报告，报告地址：http://dayu.baidu.com/dayu/eva/statement/getStatement/fid/56f4d12ca1979



## sigma机制重构及哥伦布1.0短线方案文档

### 背景与目标

线上sigma机制优化已接近尾声，但整体实现方案还是存在问题，固重构新的实现方案，老的机制保留

### 本周进度

1、本周产出哥伦布1.0短线方案和sigma机制重构文档，并于30号进行公司内部各个需求产品线培训和答疑

2、文档地址：http://sfe.baidu.com/#/阿拉丁/圣玛利亚平台


## 整体结果页loading效果   @李浪波

### 背景

sigma会在结果返回后去修改头部搜索框皮肤，会造成头部明显的跳动，正常结果也会出现下面空白情况，为了优化体验，增加重新搜索的loading效果

### 完成情况

3月14号上线小流量实验

实验地址：http://m.baidu.com/s?word=%E4%B9%8C%E9%95%87&sid=104007

实验组：104007 流量3%

对照组：104008 流量3%

### 本周进展

申请三级单转全，预计下周可以操作，目前就差关总审批通过


## 阿拉丁协同项目  @李浪波

### 背景

缩减阿拉丁样式，使结果页10条样式保持风格一致

### 进展

* 增加一种带子链的样式，29号已上线

* 弱化流程已经敲定，暂时由浪波和pm接口，完成平稳退化，后续放开权限给pm同学

* 平台配置和ODP选模板机制已经上线

* 进一步梳理mini、mcpack等数据形势的退化方案，模板支持mini和ae格式，4月1号模板上线支持

* 将本周要退化的schema提交给平台统一添加



## 阿拉丁模板性能优化  @李浪波

### 背景

缩减阿拉丁展现的不可见图片，提升页面展现速度

### 进展

* 文档地址：http://sfe.baidu.com/#/阿拉丁/无线网页搜索/模板性能优化/图片懒加载方案

* 已推送各个负责的fe操作，目前统计已有40个左右的模板做了升级，还有60%的模板未修改，正推各个负责人加速处理，若有排期困难，需要他们邮件告知


## url编码错误（含原始中文）统一修改  @李浪波

### 背景

* 在safari https 302跳转存在问题，需要url规范化

### 本周进展

* 小琴将模板对应的querylist提交给雨梅，让雨梅跑存在问题的模板list，目前还在进行中


## wise模板开发平台化二期
### 项目背景
wise阿拉丁模板开发未平台化，部署环境、调试代码成本比较高，而且目前参与wise阿拉丁模板开发的产品线有十几个，急需一个平台来管理开发人员及相关模板，以提高后续模板开发及人员管理成本。

### 目标
* 开发统一：所有产品线及所有端模板，开发统一，规范统一，流程统一
* 上线统一：统一所有搜索结果模板权限控制和上线控制
* 管理统一：所有产品线及所有端模板，统一平台管理、监控、验证等

### 整体计划
* 发单之前部署沙盒预览环境  1.20-1.25
* wise添加例行日志信息  1.25-2.1
* 支持哥伦布开发升级    2.2-3.15
    * 模板开发模块支持多根目录升级  2.22-3.1
    * 任务模块升级  3.2-3.3
    * pc&wise smarty编译脚本升级 3.4
    * 新增模板升级  3.7-3.8
        * 增加主模板类型 
    * 预览升级
        * 支持多模板编译    3.8
        * 子卡预览选项增加“选择子卡”和“选择主模板”  3.9-3.11
        * 预览数据在线merge 3.11-3.14
* 静态文件增加数据库管理    3.16-3.30
* 上线流程自动化管理 4月份

### 本周工作

* 整理平台使用说明文档，已完成
* 支持没有模块svn权限的同学发code review及提测模板
* wise base模板支持日志添加
* 继续收集平台二期需求
* 参加哥伦布2.0机制沟通


