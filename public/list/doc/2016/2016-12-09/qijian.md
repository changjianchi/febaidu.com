# 齐健

> 2016-12-05 - 2016-12-09

# mip

## 核心代码进度  

08-01 – 08-05     
1、customElement 升级，将dom元素与customElement解耦 && fix customElement bug    
2、jquery 迁移至 zepto    
3、registerElement 升级，修改注册组件方式，增加api。    
4、目录整理，拆分    

08-08 – 08-12    
1、增加 rect 组件（获取dom元素rect，页面scroll，解决iso scrollTop scrollLeft bug）    
2、增加 fn、document 组件（throttle、ready 等方法）    
3、增加 Promise （polyfill）    
4、增加 resources 模块（资源管理）        
5、升级 customElement、element （修改生命周期）    
6、升级 viewport （升级一部分接口和实现方式）    
7、增加 layout 模块 （@李浪波）    
8、提测、升级版本   

08-15 - 08-19    
1、提测、修复测试发现的问题。预计8月22上线当前的测试版本    
2、viewport升级 - 新增 scrollHeight、scrollWidth、setScrollTop 等接口，增加事件机制，暂时除移 gesture   
3、升级 Observable，提供同时 trigger 多个事件和绑定多个事件的模式，
       并且增加 mixin 功能，可以把事件机制扩展到其它类。  
4、gesture 升级为多例模式，可绑定多个 dom 元素    
5、增加 css 模块，去除 zepto 依赖
6、rect 模块升级，修复 iframe 下位置计算的问题

08-22 - 08-26    
1、mip v1.0.1 上线    
     changelog:    
     - 生命周期修改和补充。inviewCallback、viewportCallback    
     - 升级 viewport。增加  changed 事件；增加一些通用接口 getWidth、getHeight、getScrollHeight、getRect ...    
     - 增加 Resources 模块。负责mip资源管理和生命周期相关调度    
     - 增加 layout 模块。对 mip 资源做一些布局相关处理。
     - 增加一些通用模块。fn、rect、css、event ...    
     - 修复Observable、viewport bug   
2、增加 dom 模块   -  补充一些兼容不好的方法 contains、closest 等。done    
3、增加 dom-event 模块  -  对于原生事件支持不好的方法做了一些补充，增加 delegate 方法。done  
4、引入 naboo -  naboo 还需要升级，目前用起来有些麻烦   
5、修改内置组件  -  doing   
6、require.config 增加 jquery 引入 - done  

08-29 - 09-02  
1、animate  - done   
2、gesture（完成基本代码，完成三个基本手势 tap、doubletap、swipe）  -  done  
3、fetch、fetch-jsonp （polyfill）  -  done  
4、mip-base.less  - done  
5、内置组件移除 zepto  -  done  

09-05 - 09-09  
1、event-action  - done   
2、代码提测   - done  
3、基础代码测试页面（包含基础库代码的大部分功能）- done     
4、组件开发文档（近一个月新增的模块文档以及如何替代 zepto）  - doing 周末完成  
5、本次修改整体打包，上线 1.1.0 版本  - doing，测试未完成  

09-12 - 09-14  
1、修复测试后的BUG  
2、补充注释  

09-18 - 09-23  
1、v1.1.0修复测试发现的问题 & 上线 - done  
2、代码推送至github(私有仓库)  
3、增加单测 - doing  
4、编译&工具相关需求 - 整理&与孟珂沟通  
5、v1.1.0文档优化 - done  
6、整理组件规范 - doing  
7、代码修改（开源） -   todo  
8、手势增加多点 - todo  

09-26 - 09-30
1、目录整改 - done  
2、整体增加单测 - done  
3、补充注释 - doing　
4、新增mip-extensions，并迁移两个典型组件 - done

10-08 - 10-14  
1、注释整理 - done    
2、代码风格统一 - done  
3、联调核心代码编译工具 - doing    
4、mip上线流程和静态资源引入方案 - 本周产出初版方案

10-17 - 10-21  
1、联调核心代码和组件编译工具 - done  
2、核心代码编译工具升级支持dev、test模式 - done　
3、写组件示例 - done  
4、组件迁移 - doing。周五完成，下周提测  

10-24 - 10-28  
1、追查uc广告BUG - done，结论已发邮件，解决方案待讨论  
2、组件迁移新工程

    进度：10.24提测，10.26测试完毕。10.28使用新机制上线组件  
    PS：组件迁移至新工程后可以优化当前组件开发编译、组件文档等一系列组件开发的问题。  

3、静态文件上线流程及引入方案更新  

    背景和目的：  
    1、解决站长文件更新问题 - 手动更新版本成本太高  
    2、减少组件上线的风险，目前为纯手动操作。  
    3、组件上线规范化  
    进度：  
    1、修改线上静态资源缓存策略 - OP已上线  
    2、已出方案，11月4日前开发完毕   

4、MIP页面闪动问题  

    背景：MIP由于使用web components机制，目前使用JS引入组件CSS。进入页面时页面展现会错乱。  
    进度：  
    1、方案一：组件加载完成后再展现页面 - 周四完成DEMO，DEMO页展现时间从370MS增加至600MS，方案废弃  
    2、其它方案继续调研。  

5、mipmain速度打点 @李兆明  

    背景：速度打点，MIP速度统计以及做为后续优化的依据。  
    进度及排期：  
    1、10.26确定方案  
    2、10.27开发完毕  
    3、11.01上线

10-31 - 11-04  
1、组件迁移新工程 - 已迁移，还需要再跟进一段时间，待稳定  
2、静态文件上线流程及引入方案  
    进度：周五开发完毕  
    排期：下周内达到可用状态  
3、MIP页面闪动问题  
    进度：经讨论后，采用了用户按需处理的方案，如果用户页面有闪动问题，则使用我们提供的解决方案解决。  
          目前解决方案已经开发完成，测试中，待上线  
4、速度打点  
    进度：时间有delay，需要跟mip.js一起上线。目前在测试中  
5、mip.js测试  
    最近mip.js有几个大的改动  包含代码规范整理、编译升级、速度打点、BUG修复。目前这些修改已经打包提测，  
    周四出测试结果，周末跟进测试中的问题，下周上线新版本。  

11-07 - 11-11  
1、速度打点、闪动问题等核心代码升级 - 在新的无版本号的mip.js中上线  
2、mip.js  
   背景：后续都使用mip.js，不需要站长手动更新版本  
   进度：周四已上线，短期内先不大范围推进，优先保证线上稳定性，小范围的网站使用稳定后再更新至官网  
3、静态文件上线流程  
   进度：周四已经上线初版，初版可以支持自动化上线，新版的mip.js不需要人工维护线上目录。维护旧版本的操作由脚本自动完成。另外每次上线的代码都在版本库里保存，可快速回滚。  
   问题：仍然需要维护所有历史版本，只不过变成了脚本维护，已跟AE沟通 - AE同学升级上线平台，11.21联调，11.25之前上线  
4、文档补充  
   背景：  
       1、mip.js提供了一些通用api，需要提供文档。  
       2、上线流程文档  
       3、组件使用文档完善  
   进度：  
       1、组件和上线流程文档周五完成并更新  
       2、mip.js使用文档周五完成，待mip.js稳定后更新至官网
5、核心代码animate升级  
   背景：
       Naboo代码量很大，使用率太低，移除Naboo。并在核心代码里提供基本的动画工具。  
   排期：  
       11.16达到可测试状态

11-14 - 11-18
1、mip.js 上线后的文档更新等  
    a、官网文档中的mipmain替换为mip，组件路径替换 - 已完成  
    b、github文档组件路径替换 - 已完成  
    c、写一篇mip.js v1版本的文章 - doing  

2、animate模块升级，移除Naboo，只提供基本动画  - 开发完，待测  
3、上线前的自动化检测  
    周五出基本方案  
4、手百下，站长的页面图片横滑失效问题跟进    
    原因：手百BUG  
    解决方案：提供了基本解决方案给站长   
    后续：推进手百改BUG - 未开始  

11-21 - 11-25  
1、mip.js 使用文档更新至官网 - 周五  
2、修复 mip-share 展现问题（问题原因：Layout 默认加了 mip-share 宽高） - 已完成  
3、修复iphone5s UC白屏问题  
    描述：在iphone5s UC下，mip页跳第三方页面再后退，页面白屏  
    原因：未知  
    状态：后退时加入自动刷新策略 - 已完成  
4、mip.js增加a标签代理机制
    背景：在iframe中，跳转链接需要用postmessage的方式发送给父页面。其它类型的链接需要保证功能正常。  
    方案：加全局delegate，非跳转链接则加入 target="_top"，防止跳转失败。
    状态：已完成  
5、上线接入AE平台联调  
    状态：本周AE提供接口，QA正在开发接入脚本。目前未完成

11-28 - 12-02
1、AE平台联调  
    状态：正在接入  
2、华为MATE8 fixed元素错位BUG - 已修复  
3、IOS9 safari 回退白屏BUG - 已修复  
4、上线校验机制  
    进度：本周出方案，排期12-14开始  
    方案：在上线流程中新增JOB  
    JOB功能：每天同步几个top站点的源码，上线前替换静态文件地址到本地测试机，并自动在各机型浏览器下截图，截图后需要人工检查是否正常。  
5、animate模块 @吴鹏    
    进度：本周进入开发，开发已完成，周五准备测试DEMO和提测


<div style="color:#f00">
12-05 - 12-09
1、AE平台联调  
    状态：暂时hold，待AE稳定后再接入。本周咨询垂类使用AE上线出现线上问题，线上有风险，所以暂不接入AE。  
2、animate模块 @吴鹏 
    状态：已提测，12-13测试完成  
3、template模块
    背景：一些模板需要用到template  
    方案：
        1、新增template类型的组件，升级mip主模块支持新的组件类型。  
        3、新增template基类，供template类型的组件继承使用  
        2、新增templates模块，负责控制template类型的组件。   
    状态：12-09提测  
4、android低端机fixed bug修复  
    状态：周五上线  
</div>
