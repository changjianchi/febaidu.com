# 哥伦布2.0总结与感悟

> 哥伦布2.0机制推出后，对于刚入手的fe和rd来是又爱又恨的。很多时候，我们面对每一个新问题的时候都是困惑的，fe不知道，rd也不知道，只能去找齐健和宽哥去问。
作为一个刚在2.0机制下开发完一个完整哥伦布模板的fe，有必要把一些困惑记录下来，分享给刚入手的fe，如有描述不妥，随时hi我~。

## 主要从两个方面总结：如何开发，如何联调

### 1、如何开发

因为没开发过嘛，对于部分fe来说从哪里开始啄手都是迷茫的。。

1、环境：

* 有两种，1是自己的开发机，2是平台

* 平台里开发要注意的是：目前还不支持直接配alalddin_all里面的style:sigma，这个配置是用来告诉odp以sigma的方式去召回santa还是normal的方式。如果你在平台开发，平台机器默认是normal的，那你还得每天找小琴去更新aladdin_all里面的这个配置。

* 如果使用平台，记得每天早上手动编译每一个子卡模板，pm和qa才能看效果。（假设用平台地址走单，就会比较麻烦了。。）

2、 配置：

为了召回每一张子卡，要在aladdin_all里面做配置。vim /home/work/odp/conf/app/search/aladdin_all.conf。

* 配置资源号绑定的模板名应该是santa。sid绑定的模板名也是santa。

* 假设你拿到的ue图有头图样式，那么就是sigma样式的，就要配置style:sigma。如果没有头图，不用这个配置，odp会默认走normal。

3、模板：

在/home/work/aladdin-wise/src/santa路径下，放置我们的子卡，一个子卡对应一个文件名，每个文件名里面只有一个iphone.tpl（忘记iphone.only.tpl），iphone.tpl里面写模板跟平时的没啥区别，每个子卡是一个独立的关系，不存在任何联系。
要注意的是js里面只有Sa.setup(忘记A.init，忘记A.setup)，编译的时候执行sh tplmake.sh "santa: sa_name_zhuka,sa_name_rec_situ"，每个子卡都需要编译，逗号分隔。

4、开发时模板的拆分：

哥伦布2.0没有主卡的概念了，每个卡片都叫子卡。子卡跟子卡之间目前不支持通信，就是说做不到A卡片的信息变了之后B卡片也要变。遇到这种需求及时拍回去。
如果有类似模块的比如说多个横滑的模块，fe只负责做一个模板，至于这个模板展现在第几位，展现几条，就是rd要去搞定的事情。

5、召回：

说几个case-----

* aladdin_all配置正确，召回10条结果，很有可能sid有问题，这个时候找rd看us日志。注意如果使用的是线上的sid，提醒pm配置sid绑定的模板名叫santa。

* aladdin_all配置正确，召回9条结果，很有可能rd没有配置一个叫sigma_exeunt的文件，这个时候告诉rd “US要增加一个配置文件:目录/home/work/search/us/conf 文件名 sigma_exeunt”

* 正常召回，突然一刷新error页，很有可rd的us挂了，问rd是不是用的调研环境，是调研环境挂了的话赶紧让rd找杨阔看看。

* 测试机时而召回时而不召回，找rd要稳定的召回环境。fe不接受不稳定的开发环境

6、日志：

* fe原则上不打sto，告诉ubs同学用目前可以用s_order来区分哪个子卡，这个s_order在日志里面可以找到。如果ubs同学说s_order他们获取不到，就反馈给刘悦。

* 如果有多条横滑，使用横滑组件的时候，不能用循环get(i)。否则就会同时发出相应条数的日志。

### 2、如何联调

开发过程中，你会发现跟rd的联调更紧密了。

列几件你可以提醒rd的事情

1、联调时告诉rd配置cardOrder，这个是卡片与卡片间的间隔，有的是分割虚线，有的是一条灰色的要加上，看ue图定。

2、。。。。

## 一些感悟

对于fe来说，哥伦布2.0对于fe来说无疑是件好事，开发成本变小，日后模板的可复用性也变强。但是也伴随一些问题。

例如：由于初期fe和rd都不是太熟悉，追问题成本比较大；。。。。